<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ex1.html</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.slim.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    'use strict'

    let def = 0;
    document.getElementById("res").innerText = def;

    let num = "";
    let op = "";
    let result = "";

    function calc(value) {
    if (value == "AC") {
        num = "";
        op = "";
        result = "";
        document.getElementById("res").innerText = def;
    } 
    if (value == "C") {
        num = "";
        document.getElementById("res").innerText = def;
    } 
    if (value == "B") {
        if (num.length >= 1) {
            num = num.substring(0, num.length - 1);
            document.getElementById("res").innerText = num || def;
        } else {
            document.getElementById("res").innerText = def;
        }
    } 
    if (value == "-") {
        if (!num) {
            num = "-";
            document.getElementById("res").innerText = num;
        }
    }
    if (value == "=") {
        if (op && num) {
            switch (op) {
                case "+":
                    result = parseFloat(result) + parseFloat(num);
                    break;
                case "-":
                    result = parseFloat(result) - parseFloat(num);
                    break;
                case "*":
                    result = parseFloat(result) * parseFloat(num);
                    break;
                case "/":
                    if (num !== "0") {
                        result = parseFloat(result) / parseFloat(num);
                    } else {
                        result = "Error: Divide by zero!";
                    }
                    break;
                default:
                    result = "Error!";
            }
            document.getElementById("res").innerText = result;
            num = result.toString();
            op = "";
        }
      } 
      if (!isNaN(value)) {
          num += value;
          document.getElementById("res").innerText = num;
      } 
      if (['+', '*', '/'].includes(value)) {
        op = value;
        if (num) {
            result = num;
            num = "";
        }
        else alert("잘못된 입력입니다. 숫자를 먼저 입력하세요!")
      } 
    if (value == "00") {
        if (num && !num.includes(".")) {
            num += "00";
            document.getElementById("res").innerText = num;
        }
    } 
    if (value == ".") {
        if (num && !num.includes(".")) {
            num += ".";
            document.getElementById("res").innerText = num;
        } else if (!num) {
            num = "0.";
            document.getElementById("res").innerText = num;
        }
    }
}

  document.getElementById("result").innerHTML = res;
  </script>
</head>
<body>
<p><br/></p>
<div class="container">
  <h2>계산기</h2>
  <form name="calcForm" class="border p-3">
    <div class="row mb-2">
      <div class="col"><input type="text" name="result" id="result" readonly class="form-control"></div>
    </div>
    <div class="row mb-2">
      <div class="col-3"><input type="button" value="B" name="back" onclick="calc('B')" class="btn btn-warning form-control"></div>
      <div class="col-3"><input type="button" value="C" name="clear" onclick="calc('C')" class="btn btn-success form-control"></div>
      <div class="col-3"><input type="button" value="AC" name="allClear" onclick="calc('AC')" class="btn btn-success form-control"></div>
      <div class="col-3"><input type="button" value="/" name="/" onclick="calc('/')" class="btn btn-success form-control"></div>
    </div>
    <div class="row mb-2">
      <div class="col-3"><input type="button" value="7" name="7" onclick="calc('7')" class="btn btn-dark form-control"></div>
      <div class="col-3"><input type="button" value="8" name="8" onclick="calc('8')" class="btn btn-dark form-control"></div>
      <div class="col-3"><input type="button" value="9" name="9" onclick="calc('9')" class="btn btn-dark form-control"></div>
      <div class="col-3"><input type="button" value="*" name="*" onclick="calc('*')" class="btn btn-dark form-control"></div>
    </div>
    <div class="row mb-2">
      <div class="col-3"><input type="button" value="4" name="4" onclick="calc('4')" class="btn btn-dark form-control"></div>
      <div class="col-3"><input type="button" value="5" name="5" onclick="calc('5')" class="btn btn-dark form-control"></div>
      <div class="col-3"><input type="button" value="6" name="6" onclick="calc('6')" class="btn btn-dark form-control"></div>
      <div class="col-3"><input type="button" value="-" name="-" onclick="calc('-')" class="btn btn-success form-control"></div>
    </div>
    <div class="row mb-2">
      <div class="col-3"><input type="button" value="1" name="1" onclick="calc('1')" class="btn btn-dark form-control"></div>
      <div class="col-3"><input type="button" value="2" name="2" onclick="calc('2')" class="btn btn-dark form-control"></div>
      <div class="col-3"><input type="button" value="3" name="3" onclick="calc('3')" class="btn btn-dark form-control"></div>
      <div class="col-3"><input type="button" value="+" name="+" onclick="calc('+')" class="btn btn-dark form-control"></div>
      <div class="col-3"></div>
    </div>
    <div class="row mb-2">
      <div class="col-3"><input type="button" value="0" name="0" onclick="calc('0')" class="btn btn-dark form-control"></div>
      <div class="col-3"><input type="button" value="00" name="00" onclick="calc('00')" class="btn btn-dark form-control"></div>
      <div class="col-3"><input type="button" value="." name="." onclick="calc('.')" class="btn btn-dark form-control"></div>
      <div class="col-3"><input type="button" value="=" name="=" onclick="calc('=')" class="btn btn-success form-control"></div>
    </div>
  </form>
</div>
</body>
</html>

<!--
  계산기 만들기 eval
  input <-
  c b ac/
  7 8 9 * 
  4 5 6 - 
  1 2 3 +
  0 00. =
-->

