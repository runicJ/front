<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Reservation Calendar</title>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">
<style>
  body {
    font-family: Arial, sans-serif;
  }

  .calendar {
    display: inline-block;
    border-collapse: collapse;
    margin: 20px;
  }

  .calendar th,
  .calendar td {
    width: 40px;
    height: 40px;
    text-align: center;
    border: 1px solid #ddd;
  }

  .calendar .selected {
    background-color: yellow;
  }
</style>
</head>
<body>
<div class="container">
  <h2>예약하기</h2>
  <div id="calendar"></div>
  <p id="result"></p>
</div>

<script>
// 오늘 날짜 가져오기
var today = new Date();
var currentMonth = today.getMonth();
var currentYear = today.getFullYear();

// 선택한 시작일과 종료일
var startDate = null;
var endDate = null;

// 달력 생성 함수
function generateCalendar(month, year) {
  var calendarHTML = '<table class="calendar">';
  calendarHTML += '<tr><th>Sun</th><th>Mon</th><th>Tue</th><th>Wed</th><th>Thu</th><th>Fri</th><th>Sat</th></tr>';

  var firstDay = new Date(year, month, 1);
  var startingDay = firstDay.getDay();
  var monthLength = new Date(year, month + 1, 0).getDate();

  var day = 1;
  for (var i = 0; i < 6; i++) {
    calendarHTML += '<tr>';
    for (var j = 0; j < 7; j++) {
      if (i === 0 && j < startingDay) {
        calendarHTML += '<td></td>';
      } else if (day > monthLength) {
        break;
      } else {
        calendarHTML += '<td onclick="selectDate(' + day + ')"';
        if (startDate && endDate && day >= startDate && day <= endDate) {
          calendarHTML += ' class="selected"';
        }
        calendarHTML += '>' + day + '</td>';
        day++;
      }
    }
    calendarHTML += '</tr>';
    if (day > monthLength) {
      break;
    }
  }
  calendarHTML += '</table>';
  return calendarHTML;
}

// 달력 업데이트 함수
function updateCalendar() {
  var calendarDiv = document.getElementById('calendar');
  calendarDiv.innerHTML = generateCalendar(currentMonth, currentYear);
}

// 날짜 선택 함수
function selectDate(day) {
  if (startDate === null) {
    startDate = day;
    endDate = day;
  } else if (day >= startDate) {
    endDate = day;
  } else {
    endDate = startDate;
    startDate = day;
  }
  updateCalendar();
  displayResult();
}

// 선택한 날짜 출력 함수
function displayResult() {
  var resultDiv = document.getElementById('result');
  if (startDate !== null && endDate !== null) {
    resultDiv.innerHTML = '선택된 기간: ' + startDate + '일부터 ' + endDate + '일까지';
  } else {
    resultDiv.innerHTML = '';
  }
}

// 이전 달 보기
function prevMonth() {
  currentMonth--;
  if (currentMonth < 0) {
    currentMonth = 11;
    currentYear--;
  }
  updateCalendar();
}

// 다음 달 보기
function nextMonth() {
  currentMonth++;
  if (currentMonth > 11) {
    currentMonth = 0;
    currentYear++;
  }
  updateCalendar();
}

// 초기 달력 표시
updateCalendar();
</script>
</body>
</html>